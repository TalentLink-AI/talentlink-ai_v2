<!-- payment-form.component.html -->
<div class="payment-container">
  <h2>Make a Payment</h2>

  <form [formGroup]="paymentForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="name">Name</label>
      <input
        type="text"
        id="name"
        formControlName="name"
        class="form-control"
        [ngClass]="{
          'is-invalid':
            paymentForm.get('name')?.invalid && paymentForm.get('name')?.touched
        }"
      />
      <div
        class="invalid-feedback"
        *ngIf="
          paymentForm.get('name')?.invalid && paymentForm.get('name')?.touched
        "
      >
        Name is required
      </div>
    </div>

    <div class="form-group">
      <label for="email">Email</label>
      <input
        type="email"
        id="email"
        formControlName="email"
        class="form-control"
        [ngClass]="{
          'is-invalid':
            paymentForm.get('email')?.invalid &&
            paymentForm.get('email')?.touched
        }"
      />
      <div
        class="invalid-feedback"
        *ngIf="
          paymentForm.get('email')?.invalid && paymentForm.get('email')?.touched
        "
      >
        Please enter a valid email
      </div>
    </div>

    <div class="form-group">
      <label for="amount">Amount ($)</label>
      <input
        type="number"
        id="amount"
        formControlName="amount"
        class="form-control"
        [ngClass]="{
          'is-invalid':
            paymentForm.get('amount')?.invalid &&
            paymentForm.get('amount')?.touched
        }"
      />
      <div
        class="invalid-feedback"
        *ngIf="
          paymentForm.get('amount')?.invalid &&
          paymentForm.get('amount')?.touched
        "
      >
        Amount must be at least $1.00
      </div>
      <small class="form-text text-muted"
        >Enter amount in cents (e.g., 1000 = $10.00)</small
      >
    </div>

    <div class="form-group">
      <label for="card-element">Credit or debit card</label>
      <div id="card-element" class="stripe-element"></div>
    </div>

    <div class="alert alert-danger" *ngIf="paymentError">
      {{ paymentError }}
    </div>

    <div class="alert alert-success" *ngIf="paymentSuccess">
      Payment successful! Thank you for your purchase.
    </div>

    <button
      type="submit"
      class="btn btn-primary btn-block"
      [disabled]="paymentForm.invalid || isLoading || paymentSuccess"
    >
      <span
        *ngIf="isLoading"
        class="spinner-border spinner-border-sm"
        role="status"
        aria-hidden="true"
      ></span>
      {{ isLoading ? "Processing..." : "Pay Now" }}
    </button>
  </form>
</div>
